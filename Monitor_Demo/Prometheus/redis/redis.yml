groups: - name: redis_instance rules: #redis 实例宕机 危险等级: 5 - alert: RedisInstanceDown expr: redis_up == 0 for: 10s labels: severity: warning annotations: summary: "Redis down (export {{ $labels.instance }})" description: "Redis instance is down\n VALUE = {{ $value }}\n INSTANCE: {{ $labels.addr }} {{ $labels.alias }}" #redis 内存占用过多 危险等级: 4 - alert: RedisOutofMemory expr: redis_memory_used_bytes / redis_total_system_memory_bytes * 100 > 60
for: 3m labels: severity: warning annotations: summary: "Out of memory (export {{ $labels.instance }})" description: "Redis is running out of memory > 80%\n VALUE= {{ $value }}\n INSTANCE: {{ $labels.addr }} {{ $labels.alias }}" # redis 连接数过多 危险等级: 3 - alert: RedisTooManyConnections expr: redis_connected_clients > 2000 for: 3m labels: severity: warning annotations: summary: "Too many connections (export {{ $labels.instance}})" description: "Redis instance has too many connections\n value = {{$value}}\n INSTANCE: {{ $labels.addr }} {{ $labels.alias }}"